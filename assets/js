// Equipos de la Champions League 2025 (ejemplo)
const teams = [
    { id: 1, name: "Real Madrid", logo: "assets/images/teams/real-madrid.png", maxSelections: 5, currentSelections: 0 },
    { id: 2, name: "FC Barcelona", logo: "assets/images/teams/barcelona.png", maxSelections: 5, currentSelections: 0 },
    { id: 3, name: "Manchester City", logo: "assets/images/teams/man-city.png", maxSelections: 5, currentSelections: 0 },
    { id: 4, name: "Bayern Munich", logo: "assets/images/teams/bayern.png", maxSelections: 5, currentSelections: 0 },
    { id: 5, name: "Paris Saint-Germain", logo: "assets/images/teams/psg.png", maxSelections: 5, currentSelections: 0 },
    { id: 6, name: "Liverpool", logo: "assets/images/teams/liverpool.png", maxSelections: 5, currentSelections: 0 },
    { id: 7, name: "Chelsea", logo: "assets/images/teams/chelsea.png", maxSelections: 5, currentSelections: 0 },
    { id: 8, name: "Juventus", logo: "assets/images/teams/juventus.png", maxSelections: 5, currentSelections: 0 },
    // Agrega los demás equipos...
];

document.addEventListener('DOMContentLoaded', function() {
    const teamSelect = document.getElementById('team');
    const teamGrid = document.getElementById('teamGrid');
    
    function loadTeams() {
        teamSelect.innerHTML = '<option value="">Selecciona tu equipo</option>';
        teamGrid.innerHTML = '';
        
        teams.forEach(team => {
            if (team.currentSelections < team.maxSelections) {
                const option = document.createElement('option');
                option.value = team.id;
                option.textContent = team.name;
                teamSelect.appendChild(option);
                
                const teamCard = document.createElement('div');
                teamCard.className = 'team-card';
                teamCard.dataset.id = team.id;
                teamCard.innerHTML = `
                    <img src="${team.logo}" alt="${team.name}">
                    <p>${team.name}</p>
                    <small>Disponibles: ${team.maxSelections - team.currentSelections}</small>
                `;
                
                teamCard.addEventListener('click', () => {
                    if (!teamCard.classList.contains('disabled')) {
                        teamSelect.value = team.id;
                        document.querySelectorAll('.team-card').forEach(card => {
                            card.classList.remove('selected');
                        });
                        teamCard.classList.add('selected');
                    }
                });
                
                teamGrid.appendChild(teamCard);
            }
        });
        
        teams.forEach(team => {
            if (team.currentSelections >= team.maxSelections) {
                const teamCard = document.createElement('div');
                teamCard.className = 'team-card disabled';
                teamCard.dataset.id = team.id;
                teamCard.innerHTML = `
                    <img src="${team.logo}" alt="${team.name}">
                    <p>${team.name}</p>
                `;
                teamGrid.appendChild(teamCard);
            }
        });
    }
    
    loadTeams();
    
    document.getElementById('registrationForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const formData = {
            fullName: document.getElementById('fullName').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value,
            teamId: parseInt(document.getElementById('team').value),
            paymentMethod: document.getElementById('paymentMethod').value,
            paymentReference: document.getElementById('paymentReference').value
        };
        
        const selectedTeam = teams.find(team => team.id === formData.teamId);
        if (!selectedTeam || selectedTeam.currentSelections >= selectedTeam.maxSelections) {
            alert('El equipo seleccionado ya no está disponible. Por favor elige otro.');
            return;
        }
        
        selectedTeam.currentSelections++;
        
        console.log('Datos de inscripción:', formData);
        
        document.getElementById('successMessage').style.display = 'block';
        loadTeams();
        this.reset();
        
        setTimeout(() => {
            document.getElementById('successMessage').style.display = 'none';
        }, 5000);
    });
    
    teamSelect.addEventListener('change', function() {
        const selectedId = this.value;
        document.querySelectorAll('.team-card').forEach(card => {
            card.classList.remove('selected');
            if (card.dataset.id === selectedId && !card.classList.contains('disabled')) {
                card.classList.add('selected');
            }
        });
    });
});
